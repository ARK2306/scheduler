{"ast":null,"code":"import _objectSpread from\"/Users/aryanreddy/Desktop/hobbies/scheduler/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import config from'../config';import'./EmployeePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EmployeePage(){const[employeeName,setEmployeeName]=useState('');const[studentType,setStudentType]=useState('');const[scheduleTemplate,setScheduleTemplate]=useState(null);const[preferences,setPreferences]=useState({});const[isSubmitted,setIsSubmitted]=useState(false);useEffect(()=>{// Load schedule template from URL parameter or latest template\nloadScheduleTemplate();},[]);const loadScheduleTemplate=async()=>{try{const urlParams=new URLSearchParams(window.location.search);const scheduleId=urlParams.get('schedule');const endpoint=scheduleId?\"\".concat(config.API_BASE_URL,\"/api/schedule-template/\").concat(scheduleId):\"\".concat(config.API_BASE_URL,\"/api/schedule-template/latest\");const response=await fetch(endpoint);if(response.ok){const template=await response.json();setScheduleTemplate(template);// Initialize preferences\nconst initialPreferences={};template.timeblocks.forEach(block=>{initialPreferences[block.id]='willing';});setPreferences(initialPreferences);}else if(response.status===404){console.log('No schedule template found');setScheduleTemplate(null);}else{const errorText=await response.text();console.error('Failed to load schedule template:',response.status,errorText);}}catch(error){console.error('Failed to load schedule template:',error);setScheduleTemplate(null);}};const updatePreference=(blockId,preference)=>{setPreferences(prev=>_objectSpread(_objectSpread({},prev),{},{[blockId]:preference}));};const submitPreferences=async()=>{if(!employeeName.trim()||!studentType){alert('Please enter your name and select your student type');return;}try{const response=await fetch(\"\".concat(config.API_BASE_URL,\"/api/employee/submit-preferences\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({employeeName:employeeName.trim(),studentType,scheduleId:scheduleTemplate.id,preferences})});if(response.ok){setIsSubmitted(true);}else{alert('Failed to submit preferences');}}catch(error){console.error('Failed to submit preferences:',error);alert('Failed to submit preferences');}};const getPreferenceColor=preference=>{switch(preference){case'willing':return'#28a745';case'prefer-not':return'#ffc107';case'cannot':return'#dc3545';default:return'#6c757d';}};const getPreferenceText=preference=>{switch(preference){case'willing':return'Willing to work';case'prefer-not':return'Can work but prefer not to';case'cannot':return'Cannot work';default:return'No preference';}};const isEligibleForShift=block=>{if(block.shiftType==='both')return true;if(block.shiftType==='grad'&&studentType==='graduate')return true;if(block.shiftType==='undergrad'&&studentType==='undergraduate')return true;return false;};if(isSubmitted){return/*#__PURE__*/_jsx(\"div\",{className:\"employee-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u2705 Preferences Submitted Successfully!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Thank you, \",employeeName,\"! Your shift preferences have been recorded.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"You will be notified once the final schedule is created.\"})]})});}if(!scheduleTemplate){return/*#__PURE__*/_jsx(\"div\",{className:\"employee-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loading Schedule...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please wait while we load the available shifts.\"})]})});}if(!scheduleTemplate){return/*#__PURE__*/_jsx(\"div\",{className:\"employee-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"employee-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Employee Portal - Submit Your Availability\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"no-schedule-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No Schedule Available\"}),/*#__PURE__*/_jsx(\"p\",{children:\"There is currently no schedule template available. Please check back later or contact your administrator.\"})]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"employee-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"employee-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Employee Portal - Submit Your Availability\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please enter your information and select your preferences for each shift\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"employee-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"personal-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:employeeName,onChange:e=>setEmployeeName(e.target.value),placeholder:\"Enter your full name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Student Type:\"}),/*#__PURE__*/_jsxs(\"select\",{value:studentType,onChange:e=>setStudentType(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select your status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"undergraduate\",children:\"Undergraduate Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"graduate\",children:\"Graduate Student\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"preference-legend\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Preference Legend\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-items\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color willing\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Willing to work\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color prefer-not\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Can work but prefer not to\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"legend-color cannot\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Cannot work\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shifts-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Shifts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shifts-grid\",children:['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'].map(day=>/*#__PURE__*/_jsxs(\"div\",{className:\"day-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:day}),/*#__PURE__*/_jsx(\"div\",{className:\"day-shifts\",children:scheduleTemplate.timeblocks.filter(block=>block.day===day).map(block=>/*#__PURE__*/_jsxs(\"div\",{className:\"shift-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shift-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shift-time\",children:block.time}),/*#__PURE__*/_jsxs(\"div\",{className:\"shift-details\",children:[block.title,\" (\",block.duration,\"h)\"]}),!isEligibleForShift(block)&&/*#__PURE__*/_jsx(\"div\",{className:\"not-eligible\",children:\"Not eligible for this shift\"})]}),isEligibleForShift(block)&&/*#__PURE__*/_jsx(\"div\",{className:\"preference-buttons\",children:['willing','prefer-not','cannot'].map(pref=>/*#__PURE__*/_jsx(\"button\",{className:\"pref-btn \".concat(preferences[block.id]===pref?'active':''),style:{backgroundColor:preferences[block.id]===pref?getPreferenceColor(pref):'#f8f9fa',color:preferences[block.id]===pref?'white':'#333'},onClick:()=>updatePreference(block.id,pref),title:getPreferenceText(pref),children:pref==='willing'?'✓':pref==='prefer-not'?'~':'✗'},pref))})]},block.id))})]},day))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-section\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:submitPreferences,disabled:!employeeName.trim()||!studentType,children:\"Submit Preferences\"})})]})]});}export default EmployeePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}